<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 18 â€“ Deepika â¤ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff4e50; --accent: #ffd700; --deep: #1a0a1a; }
        
        body { margin: 0; padding: 0; min-height: 100vh; background: #1a0a1a; font-family: 'Poppins', sans-serif; text-align: center; color: white; overflow-x: hidden; }

        .hidden { display: none !important; }
        .full-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; padding: 20px; box-sizing: border-box; }

        /* Background Effects */
        #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 1; pointer-events: none; }
        .romantic-bg { background: linear-gradient(135deg, #1a0a1a, #4a144d, #2d0b2e); background-size: 400% 400%; animation: romanticBG 12s ease infinite; }
        @keyframes romanticBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* Typography */
        .glow-title { font-family: 'Playfair Display'; font-size: 3rem; background: linear-gradient(to right, #ffd700, #ff85a2, #ffd700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: shine 3s linear infinite; background-size: 200%; }
        @keyframes shine { 0% { background-position: 0%; } 100% { background-position: 200%; } }

        /* Buttons & Inputs */
        .btn { background: white; color: #4a144d; border: none; padding: 15px 35px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.3s; box-shadow: 0 5px 15px rgba(255,215,0,0.2); margin: 10px; z-index: 10; }
        .btn:hover { transform: scale(1.05); background: #fff0f0; }
        input { padding: 12px; border-radius: 10px; border: none; text-align: center; width: 250px; margin: 10px; background: rgba(255,255,255,0.9); color: #333; font-weight: bold; }

        /* Poetry Carousel */
        .carousel-container { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 20px; width: 100%; padding: 40px 0; scrollbar-width: none; z-index: 5; position: relative; }
        .carousel-container::-webkit-scrollbar { display: none; }
        .poem-card { min-width: 85%; scroll-snap-align: center; background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(15px); border-radius: 25px; padding: 30px; height: 55vh; overflow-y: auto; border: 1px solid rgba(255, 255, 255, 0.1); box-sizing: border-box; }
        .poem-text { font-family: 'Caveat'; font-size: 1.5rem; line-height: 1.4; color: #ffe4e1; white-space: pre-line; text-align: left; }
        
        /* Slideshow */
        #slideshowContainer { background: radial-gradient(circle, #333, #000); z-index: 11000; }
        .slide-img { max-width: 90%; max-height: 60vh; border-radius: 15px; border: 5px solid white; box-shadow: 0 0 30px rgba(255,255,255,0.2); }
        .caption { margin-top: 25px; font-size: 1.8em; font-family: 'Caveat'; color: var(--accent); text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }

        /* Envelope */
        .envelope-wrapper { position: fixed; bottom: 30px; right: 30px; z-index: 2000; cursor: pointer; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        #letterOverlay { background: rgba(0,0,0,0.95); display: none; z-index: 5000; }
        .letter-content { background: #fdf5e6; color: #333; font-family: 'Caveat'; padding: 40px; border-radius: 5px; width: 85%; max-width: 600px; max-height: 80vh; overflow-y: auto; text-align: left; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
    </style>
</head>
<body class="romantic-bg">

<canvas id="particles-js"></canvas>

<audio id="quizMusic" loop><source src="quiz.m4a" type="audio/mpeg"></audio>
<audio id="memoriesMusic" loop><source src="memories.m4a" type="audio/mpeg"></audio>
<audio id="mainMusic" loop><source src="main.m4a" type="audio/mpeg"></audio>

<div id="audioOverlay" class="full-screen">
    <h1 class="glow-title">Chapter 18</h1>
    <p>Every memory, every verse... for you. â¤ï¸</p>
    <button class="btn" onclick="startExperience()">Open Your World âœ¨</button>
</div>

<div id="countdownScreen" class="full-screen hidden">
    <h1 class="glow-title" style="font-size: 2rem;">Wait for the Magic...</h1>
    <div id="timer" style="font-size: 3rem; color: var(--accent); margin: 20px 0;">00:00:00</div>
    <p id="patienceMessage" style="color: #ff85a2; font-weight: bold; min-height: 24px;"></p>
    <button class="btn" onclick="checkPatience()">Verify & Enter ğŸ”“</button>
</div>

<div id="welcomeScreen" class="full-screen hidden">
    <div style="background: rgba(0,0,0,0.4); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);">
        <h3 style="color: var(--accent);">ğŸ”“ The Chapter 18 Cipher</h3>
        <p style="letter-spacing: 2px; border: 1px dashed #fff; padding: 15px; background: rgba(0,0,0,0.3); font-size: 0.9em;">
            23-8-15 &nbsp; 9-19 &nbsp; 25-15-21-18 <br> 19-15-21-12-13-1-20-5 ?
        </p>
        <p style="font-size: 0.75em; color: #ddd; margin-bottom: 10px;"><i>HINT: Answer in CAPITAL letters. No AI! ğŸ˜‰</i></p>
        <input type="text" id="cipherInput" placeholder="DECODE HERE...">
        <br><button class="btn" onclick="checkCipher()">Unlock Memories âœ¨</button>
    </div>
</div>

<div id="slideshowContainer" class="full-screen hidden">
    <img id="currentSlideImg" class="slide-img" src="">
    <div id="currentCaption" class="caption"></div>
    <button class="btn" onclick="nextSlide()">Next Memory â”</button>
</div>

<div id="navPopup" class="full-screen hidden" style="background: rgba(0,0,0,0.95); z-index: 12000;">
    <h2 class="glow-title" style="font-size: 2em;">Where to next? âœ¨</h2>
    <div id="popupOptions"></div>
</div>

<div id="mainContent" class="hidden" style="padding-bottom: 100px;">
    <h1 class="glow-title" style="margin-top: 50px;">MY LOVE TURNS 18</h1>
    
    <div class="carousel-container">
        <div class="poem-card">
            <h2 style="color: var(--accent); font-family: 'Playfair Display';">Our Journey</h2>
            <div class="poem-text">Bestowed upon a flowerğŸŒ¸,  
Struck by the fragrance she showersğŸŒ¿.  
A moment to grasp the metaphorâ€”  
Her simple smile swirls my heartâ€™s coreâ¤ï¸â€ğŸ”¥.  
Blooming, my soul becomes ecstaticâœ¨.

Her gaze whispers romanceğŸ’«,  
Bringing peace to lifeâ€™s expanseğŸ•Šï¸.  
Curves flow from neck down to feetğŸ’ƒ,  
Where every delicacy meets perfection sweetğŸƒ.  
Darling, your lips, a place to dieğŸ’‹,  
The ultimate moon with no smudge in the skyğŸŒ™,  
Filling life with love and gentle restğŸŒ¹.

The night we shared,  
By the riverbank sideğŸï¸,  
Cuddled close on the steps,  
Warmth growing deep insideğŸ”¥â€”  
That pace embracing us,  
Leading to the magical bliss,  
Caught in the momentâ€™s blushğŸ˜Š,  
Our first ever kissğŸ’.

The eyes she holdsğŸ‘€,  
The cheeks so soft and fair,  
The curves she gently gotâ€”  
A dreamy heaven rareğŸŒˆ.

The magic that the dawn enclosesğŸŒ…,  
The same magic she lightly sprinklesâœ¨,  
A tender touch that never closes,  
Awakening the child within twinklesğŸ‡.

Every tear in your eyesğŸ˜” 
Makes my heart acheğŸ’”,  
A promise that never diesâ€”  
To keep her happiness awakeğŸŒŸ.

The moment we shared  
on the verge of the hillâ›°ï¸,  
sinking my heart  
on the instrumental touch  
realizing how much I have received  
as I got you with meğŸ’.  

You are my feel-good charmâœ¨,  
The atmosphere you create  
Holds something so evidentâ€”  
The girl for whom I dared  
To bid adieu to my dream jobğŸ¯,  
Though I must pursue it still,  
To make you forever mineğŸ’–.  

You are the most important,  
I prioritize you alwaysğŸ¥‡,  
Want you to hold me closeğŸ¤—,  
Beside a twinkling futureâœ¨,  
With a torchlight to cherish  
Our moments in successğŸ†.  

You are my wife already,  
Living in my heart and mindâ€”  
Just wait and watch, my love,  
Our journey yet to unwindğŸ’‘.

The nonchalant Am I? NahhğŸ˜‰;  
Feels the velvety softness in every beatğŸ’“,  
Charm intact as if we both are soul matesğŸ”—.

Devoted to be a moonlightğŸŒ•,  
Ending like a sweetheartâ€™s twilight...ğŸŒ…

Now, a breath, a glance,
Where our lips will follow...</div>
        </div>

        <div class="poem-card">
            <h2 style="color: var(--accent); font-family: 'Playfair Display';">Irreplaceable</h2>
            <div class="poem-text">Isn't the nature indicating somethin', ğŸŒ¿
Moon seems to be more shiny. ğŸŒ•
Even the beauty lost its weight, âš–ï¸
Been replaced by the the irreplaceable. âœ¨
Yeah its the name, that I chase for , ğŸ‘£
Deeply in hearts of optimistic forest, ğŸŒ²
The name of my flower, Deepika. ğŸŒ¸</div>
        </div>

        <div class="poem-card">
            <h2 style="color: var(--accent); font-family: 'Playfair Display';">The Rooting Self</h2>
            <div class="poem-text">Dizziness felt ğŸ’«
And darkness arose ğŸŒ‘
Just in time, the tale-lore spoke ğŸ“–
Enough of the fairy ğŸ§šâ€â™€ï¸
The magic spread thin âœ¨
Just to keep me awake ğŸ‘ï¸
And rooting still ğŸŒ³
For the together self... ğŸ‘©â€â¤ï¸â€ğŸ‘¨</div>
        </div>

        <div class="poem-card" style="border: 2px solid var(--accent);">
            <h2 style="color: var(--accent); font-family: 'Playfair Display';">A New Chapter âœ¨</h2>
            <div class="poem-text">
                [PASTE YOUR NEW POEM HERE]
            </div>
        </div>
    </div>

    <div class="envelope-wrapper" onclick="openLetter()">
        <div style="font-size: 50px;">âœ‰ï¸</div>
        <p style="font-size: 0.8rem; color: var(--accent); font-weight: bold;">OPEN ME</p>
    </div>
</div>

<div id="letterOverlay" class="full-screen" onclick="closeLetter()">
    <div class="letter-content" onclick="event.stopPropagation()">
        <h2 style="text-align: center; border-bottom: 1px solid #ddd; padding-bottom: 10px;">My Dearest Deepika,</h2>
        <div style="white-space: pre-line; line-height: 1.6;">
            [PASTE YOUR PERSONAL LETTER HERE]
        </div>
        <p style="text-align: right; font-size: 1.8rem; color: #4a144d; font-weight: bold; margin-top: 30px;">With love, <br> Kartik</p>
        <center><button class="btn" onclick="closeLetter()" style="background: #4a144d; color: white;">Close Letter</button></center>
    </div>
</div>

<script>
    // 1. PARTICLES WITH TOUCH REACTION
    const canvas = document.getElementById('particles-js');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    let mouse = { x: null, y: null };
    window.addEventListener('mousemove', (e) => { mouse.x = e.x; mouse.y = e.y; });
    window.addEventListener('touchstart', (e) => { mouse.x = e.touches[0].clientX; mouse.y = e.touches[0].clientY; });
    class Particle {
        constructor() { this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height; this.size = Math.random() * 2 + 1; this.baseX = this.x; this.baseY = this.y; }
        update() {
            let dx = mouse.x - this.x; let dy = mouse.y - this.y;
            let dist = Math.sqrt(dx*dx + dy*dy);
            if (dist < 100) { this.x -= dx/10; this.y -= dy/10; }
            else { if(this.x !== this.baseX) this.x -= (this.x - this.baseX)/20; if(this.y !== this.baseY) this.y -= (this.y - this.baseY)/20; }
            this.y -= 0.5; if(this.y < 0) { this.y = canvas.height; this.baseY = canvas.height; }
        }
        draw() { ctx.fillStyle = 'rgba(255, 215, 0, 0.5)'; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill(); }
    }
    function initP() { for(let i=0; i<80; i++) particles.push(new Particle()); }
    function animateP() { ctx.clearRect(0,0,canvas.width, canvas.height); particles.forEach(p => { p.update(); p.draw(); }); requestAnimationFrame(animateP); }
    initP(); animateP();

    // 2. MUSIC MANAGER
    function playTrack(id) {
        ['quizMusic', 'memoriesMusic', 'mainMusic'].forEach(mId => {
            let m = document.getElementById(mId);
            if(mId === id) { m.play(); m.volume = 1; }
            else { m.pause(); m.currentTime = 0; }
        });
    }

    // 3. LOGIC & SECTIONS
    const targetDate = new Date("February 16, 2026 00:00:00").getTime();
    let isTimeUp = false;
    let visited = { 1: false, 2: false, 3: false };
    const photos = {
        1: [{img: "Deepika1.jpg", msg: "Beginning of your journey ğŸŒ±"}, {img: "Deepika2.jpg", msg: "My favorite smile ğŸ˜ŒğŸ’•"}, {img: "Deepika3.jpg", msg: "Just elegant âœ¨"}, {img: "Deepika4.jpg", msg: "ssshhh.... you are mine ğŸ¤«â¤ï¸"}, {img: "Deepika5.jpg", msg: "Doraemon ğŸ±â€ğŸš€"}, {img: "Deepika6.jpg", msg: "Most beautiful girl ğŸ‘‘"}],
        2: [{img: "Deepika7.jpg", msg: "In the moment ğŸ”ğŸ’–"}, {img: "Deepika8.jpg", msg: "Kitni khush h yrr ğŸ˜ŠğŸ§¿"}, {img: "Deepika9.jpg", msg: "Pakka mere baare m soch rhi h ğŸ¤”ğŸ’­"}, {img: "Deepika10.jpg", msg: "Chhota Don ğŸ˜ğŸ‘Š"}, {img: "Deepika11.jpg", msg: "Chin tapak dum dum ğŸª„ğŸ˜ˆ"}, {img: "Deepika.jpg", msg: "My chubby princess ğŸ˜˜ğŸ‘‘"}],
        3: [{img: "Deepika12.jpg", msg: "Holding you ğŸ¤ğŸ’"}, {img: "Deepika13.jpg", msg: "Our future ğŸ‘ï¸ğŸŒ…"}, {img: "Deepika14.jpg", msg: "Invisible bluetooth ğŸ“¶ğŸ’"}, {img: "Deepika15.jpg", msg: "Just you and me ğŸ‘©â€â¤ï¸â€ğŸ‘¨"}, {img: "Deepika16.jpg", msg: "The deadly duoo ğŸ”¥âš”ï¸"}, {img: "Deepika17.jpg", msg: "Made for each other â™¾ï¸ğŸŒ¹"}]
    };
    let currentS = 0, currentI = 0;

    function startExperience() {
        playTrack('quizMusic');
        document.getElementById('audioOverlay').classList.add('hidden');
        document.getElementById('countdownScreen').classList.remove('hidden');
        setInterval(updateTimer, 1000);
    }

    function updateTimer() {
        const diff = targetDate - new Date().getTime();
        if(diff <= 0) { isTimeUp = true; document.getElementById('timer').innerText = "00:00:00"; }
        else {
            const h = Math.floor(diff/3600000); const m = Math.floor((diff%3600000)/60000); const s = Math.floor((diff%60000)/1000);
            document.getElementById('timer').innerText = `${h}h : ${m}m : ${s}s`;
        }
    }

    function checkPatience() {
        if(isTimeUp) { document.getElementById('countdownScreen').classList.add('hidden'); document.getElementById('welcomeScreen').classList.remove('hidden'); }
        else { document.getElementById('patienceMessage').innerText = "Good things take time... â¤ï¸"; setTimeout(()=>document.getElementById('patienceMessage').innerText="", 3000); }
    }

    function checkCipher() {
        if(document.getElementById('cipherInput').value.trim().toUpperCase() === "KARTIK") {
            playTrack('memoriesMusic');
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('navPopup').classList.remove('hidden');
            handleSectionEnd();
        }
    }

    function startSection(id) {
        currentS = id; currentI = 0; visited[id] = true;
        document.getElementById('navPopup').classList.add('hidden');
        document.getElementById('slideshowContainer').classList.remove('hidden');
        updateSlide();
    }

    function updateSlide() {
        const data = photos[currentS][currentI];
        document.getElementById('currentSlideImg').src = data.img;
        document.getElementById('currentCaption').innerText = data.msg;
    }

    function nextSlide() {
        currentI++;
        if(currentI < photos[currentS].length) updateSlide();
        else handleSectionEnd();
    }

    function handleSectionEnd() {
        document.getElementById('slideshowContainer').classList.add('hidden');
        const popup = document.getElementById('navPopup');
        const options = document.getElementById('popupOptions');
        options.innerHTML = "";
        popup.classList.remove('hidden');
        if (!visited[1]) addOpt("âœ¨ Classic Beauty", () => startSection(1));
        if (!visited[2]) addOpt("ğŸ˜œ Little Miss Dramebaaz", () => startSection(2));
        if (!visited[3]) addOpt("ğŸ‘©â€â¤ï¸â€ğŸ‘¨ Soulmate Saga", () => startSection(3));
        addOpt("ğŸš€ Launch Chapter 18", launchHome);
    }

    function addOpt(txt, cb) {
        const b = document.createElement('button'); b.className="btn"; b.innerText=txt; b.onclick=cb;
        document.getElementById('popupOptions').appendChild(b);
    }

    function launchHome() {
        playTrack('mainMusic');
        document.getElementById('navPopup').classList.add('hidden');
        const main = document.getElementById('mainContent');
        main.classList.remove('hidden');
        setTimeout(() => main.style.opacity = 1, 100);
    }

    function openLetter() { document.getElementById('letterOverlay').style.display = 'flex'; }
    function closeLetter() { document.getElementById('letterOverlay').style.display = 'none'; }
</script>
</body>
</html>
