<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 18 â€“ Deepika â¤ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #ffd700; --primary: #ff4e50; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Poppins', sans-serif; background: #0a0a0a; color: white; }
        .hidden { display: none !important; }
        .full-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; text-align: center; padding: 20px; box-sizing: border-box; }

        /* Background Effects */
        canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 1; }
        .bg-main { background: radial-gradient(circle at center, #1a0a2e 0%, #050505 100%); }

        /* Typography */
        .glow-title { font-family: 'Playfair Display'; font-size: 3rem; color: var(--accent); text-shadow: 0 0 20px rgba(255,215,0,0.5); }
        .handwritten { font-family: 'Caveat'; font-size: 1.6rem; line-height: 1.3; }

        /* Buttons & Inputs */
        .btn { background: white; color: #1a0a2e; border: none; padding: 12px 25px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.3s; z-index: 2000; margin: 10px; }
        .btn:hover { transform: scale(1.1); box-shadow: 0 0 15px var(--accent); }
        input { padding: 12px; border-radius: 10px; border: 2px solid var(--accent); text-align: center; background: rgba(255,255,255,0.9); color: #000; font-weight: bold; }

        /* Slideshow */
        .slide-img { max-width: 85%; max-height: 50vh; border-radius: 15px; border: 5px solid white; box-shadow: 0 0 25px rgba(255,255,255,0.2); }

        /* Floating Corner Icons */
        .floating-icon { position: fixed; width: 80px; height: 80px; cursor: pointer; z-index: 3000; transition: all 2s ease-in-out; }
        .icon-symbol { font-size: 2.5rem; display: block; filter: drop-shadow(0 0 10px gold); }

        /* Poem Container */
        .poem-box { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 30px; border-radius: 20px; border: 1px solid var(--accent); max-width: 500px; width: 90%; position: relative; }

        /* Final Reveal Styles */
        .proposal-card { background: rgba(0,0,0,0.8); border: 2px solid var(--primary); padding: 40px; border-radius: 30px; }
        .final-msg { font-size: 3rem; color: var(--primary); animation: heartBeat 1.5s infinite; }
        @keyframes heartBeat { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body class="bg-main">

    <canvas id="starCanvas"></canvas>

    <audio id="quizMusic" loop><source src="quiz.m4a" type="audio/mpeg"></audio>
    <audio id="memoriesMusic" loop><source src="memories.m4a" type="audio/mpeg"></audio>
    <audio id="mainMusic" loop><source src="main.m4a" type="audio/mpeg"></audio>

    <div id="startStage" class="full-screen">
        <h1 class="glow-title">Chapter 18</h1>
        <button class="btn" onclick="initExperience()">Open Your World âœ¨</button>
    </div>

    <div id="loungeStage" class="full-screen hidden">
        <h1 class="glow-title">Wait for the Magic...</h1>
        <div id="timer" style="font-size: 4rem; color: var(--accent);">00:00:05</div>
        <p id="patienceMsg" style="height: 20px; color: #ff85a2;"></p>
        <button class="btn" onclick="checkPatience()">Verify & Enter ğŸ”“</button>
    </div>

    <div id="cipherStage" class="full-screen hidden">
        <div style="background: rgba(0,0,0,0.6); padding: 30px; border-radius: 20px; border: 1px solid var(--accent);">
            <h2 class="glow-title" style="font-size: 1.8rem;">ğŸ”“ The Cipher</h2>
            <p style="letter-spacing: 3px; border: 1px dashed white; padding: 15px;">23-8-15 &nbsp; 9-19 &nbsp; 25-15-21-18 <br> 19-15-21-12-13-1-20-5 ?</p>
            <p style="font-size: 0.8rem; color: #ccc;"><i>(HINT: Answer in CAPITAL & No AI for you, Deepika! ğŸ˜‰)</i></p>
            <input type="text" id="cipherInput" placeholder="DECODE HERE...">
            <br><button class="btn" onclick="verifyCipher()">Verify âœ¨</button>
        </div>
    </div>

    <div id="menuStage" class="full-screen hidden">
        <h2 class="glow-title">Memory Path</h2>
        <button class="btn" onclick="startPhotos(1)">âœ¨ Classic Beauty</button>
        <button class="btn" onclick="showLock()">ğŸ˜œ Little Miss Dramebaaz</button>
        <button class="btn" onclick="startPhotos(3)">ğŸ‘©â€â¤ï¸â€ğŸ‘¨ Soulmate Saga</button>
        <div id="passLock" class="hidden">
            <input type="password" id="secretPass" placeholder="Secret Code...">
            <br><button class="btn" onclick="verifySecret()">Unlock ğŸ”“</button>
        </div>
    </div>

    <div id="slideshowStage" class="full-screen hidden" style="background: black;">
        <img id="slideImg" class="slide-img" src="">
        <div id="caption" class="caption handwritten" style="color: var(--accent); margin-top:20px;"></div>
        <button class="btn" onclick="nextPhoto()">Next Memory â”</button>
    </div>

    <div id="mainPage" class="full-screen hidden">
        <h1 class="glow-title">MY LOVE TURNS 18</h1>
        <div id="iconVerses" class="floating-icon" onclick="openPoemFlow()"><span class="icon-symbol">ğŸ“œ</span><small>Verses</small></div>
        <div id="iconLetter" class="floating-icon" onclick="openLetter()"><span class="icon-symbol">ğŸ’Œ</span><small>Letter</small></div>
        <button id="proposalTrigger" class="btn hidden" onclick="startProposal()" style="margin-top: 50px; background: var(--primary); color: white;">A Question for You... ğŸ’</button>
    </div>

    <div id="poemOverlay" class="full-screen hidden" style="background: rgba(0,0,0,0.95);">
        <div id="poemContent" class="poem-box handwritten"></div>
        <button class="btn" id="nextPoemBtn" onclick="nextPoem()">Next Poem âœ¨</button>
    </div>

    <div id="letterOverlay" class="full-screen hidden" style="background: rgba(0,0,0,0.95);">
        <div class="poem-box handwritten" style="background: #fdf5e6; color: #333; text-align: left;">
            <p>[PASTE YOUR PERSONAL LETTER HERE]</p>
        </div>
        <button class="btn" onclick="closeLetter()">Close Letter</button>
    </div>

    <div id="propStage1" class="full-screen hidden">
        <div class="proposal-card">
            <h2>Deepika, how many future years do you want to be with me?</h2>
            <button class="btn" onclick="nextPropStage()">â™¾ï¸</button>
            <button class="btn" onclick="nextPropStage()">Infinite</button>
        </div>
    </div>

    <div id="propStage2" class="full-screen hidden">
        <div class="proposal-card">
            <h2>You really do mean your answer? ğŸ¥º</h2>
            <button class="btn" onclick="finishProposal()">Yes, I do! â¤ï¸</button>
            <button class="btn" onclick="khabardar()">No...</button>
        </div>
    </div>

    <div id="finalStage" class="full-screen hidden">
        <h1 class="final-msg">I LOVE YOU DEEPIKA!</h1>
        <h2 style="font-size: 2.5rem;">MY WORLD... ğŸŒğŸ’–</h2>
        <div style="font-size: 4rem;">ğŸ’‹ğŸ’‹ğŸ’‹â¤ï¸â¤ï¸â¤ï¸</div>
    </div>

    <script>
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [], comets = [];
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;

        class Star {
            constructor() { this.x = Math.random()*canvas.width; this.y = Math.random()*canvas.height; this.size = Math.random()*1.5; this.opacity = Math.random(); }
            draw() { ctx.fillStyle = `rgba(255,255,255,${this.opacity})`; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill(); }
        }
        class Comet {
            constructor() { this.reset(); }
            reset() { this.x = Math.random()*canvas.width; this.y = -50; this.speed = Math.random()*5+2; this.len = Math.random()*80+20; }
            update() { this.y += this.speed; this.x -= this.speed/2; if(this.y > canvas.height) this.reset(); }
            draw() { ctx.strokeStyle = 'rgba(255,215,0,0.5)'; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.lineTo(this.x+this.len/2, this.y-this.len); ctx.stroke(); }
        }
        function initStars() { for(let i=0; i<150; i++) stars.push(new Star()); for(let i=0; i<5; i++) comets.push(new Comet()); }
        function animate() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            stars.forEach(s => s.draw()); comets.forEach(c => { c.update(); c.draw(); });
            requestAnimationFrame(animate);
        }
        initStars(); animate();

        let targetDate, isReady = false, pIndex = 0, currentS = 0, photoIdx = 0;
        let seen = {1:false, 2:false, 3:false}, vVerses = false, vLetter = false;

        const poems = [
            `<b>Our Journey</b>\n\nBestowed upon a flowerğŸŒ¸, Struck by the fragrance she showersğŸŒ¿. Her simple smile swirls my heartâ€™s coreâ¤ï¸â€ğŸ”¥. Blooming, my soul becomes ecstaticâœ¨.\n\nHer gaze whispers romanceğŸ’«, Bringing peace to lifeâ€™s expanseğŸ•Šï¸. Curves flow from neck down to feetğŸ’ƒ. Darling, your lips, a place to dieğŸ’‹, The ultimate moon with no smudge in the skyğŸŒ™.`,
            `<b>Irreplaceable</b>\n\nIsn't the nature indicating somethin', ğŸŒ¿\nMoon seems to be more shiny. ğŸŒ•\nEven the beauty lost its weight, âš–ï¸\nBeen replaced by the the irreplaceable. âœ¨\nYeah its the name, that I chase for , ğŸ‘£\nDeeply in hearts of optimistic forest, ğŸŒ²\nThe name of my flower, Deepika. ğŸŒ¸`,
            `<b>The Rooting Self</b>\n\nDizziness felt ğŸ’«\nAnd darkness arose ğŸŒ‘\nJust in time, the tale-lore spoke ğŸ“–\nEnough of the fairy ğŸ§šâ€â™€ï¸\nThe magic spread thin âœ¨\nJust to keep me awake ğŸ‘ï¸\nAnd rooting still ğŸŒ³\nFor the together self... ğŸ‘©â€â¤ï¸â€ğŸ‘¨`
        ];

        const photos = {
            1: [{img:"Deepika1.jpg", m:"Journey begins ğŸŒ±"}, {img:"Deepika2.jpg", m:"Favorite smile ğŸ˜ŒğŸ’•"}],
            2: [{img:"Deepika7.jpg", m:"In the moment ğŸ”ğŸ’–"}, {img:"Deepika10.jpg", m:"Chhota Don ğŸ˜ğŸ‘Š"}],
            3: [{img:"Deepika12.jpg", m:"Holding you ğŸ¤ğŸ’"}, {img:"Deepika17.jpg", m:"Together â™¾ï¸ğŸŒ¹"}]
        };

        function initExperience() {
            document.getElementById('quizMusic').play();
            document.getElementById('startStage').classList.add('hidden');
            document.getElementById('loungeStage').classList.remove('hidden');
            targetDate = new Date().getTime() + 5000;
            setInterval(updateTimer, 1000);
        }
        function updateTimer() {
            const diff = targetDate - new Date().getTime();
            if(diff <= 0) { isReady = true; document.getElementById('timer').innerText = "00:00:00"; }
            else { const s = Math.floor((diff%60000)/1000); document.getElementById('timer').innerText = `00:00:0${s}`; }
        }
        function checkPatience() {
            if(isReady) { document.getElementById('loungeStage').classList.add('hidden'); document.getElementById('cipherStage').classList.remove('hidden'); }
            else { document.getElementById('patienceMsg').innerText="Good things take time... â¤ï¸"; setTimeout(()=>document.getElementById('patienceMsg').innerText="", 2000); }
        }
        function verifyCipher() {
            if(document.getElementById('cipherInput').value.trim().toUpperCase() === "KARTIK") {
                document.getElementById('cipherStage').classList.add('hidden');
                playTrack('memoriesMusic');
                document.getElementById('menuStage').classList.remove('hidden');
            }
        }
        function showLock() { document.getElementById('passLock').classList.toggle('hidden'); }
        function verifySecret() { if(document.getElementById('secretPass').value === "Let's Deep Dive") startPhotos(2); else alert("Incorrect Code!"); }
        function startPhotos(id) {
            currentS = id; photoIdx = 0; seen[id] = true;
            document.getElementById('menuStage').classList.add('hidden');
            document.getElementById('slideshowStage').classList.remove('hidden');
            updatePhoto();
        }
        function updatePhoto() {
            const p = photos[currentS][photoIdx];
            document.getElementById('slideImg').src = p.img;
            document.getElementById('caption').innerText = p.m;
        }
        function nextPhoto() {
            photoIdx++;
            if(photoIdx < photos[currentS].length) updatePhoto();
            else {
                document.getElementById('slideshowStage').classList.add('hidden');
                if(seen[1] && seen[2] && seen[3]) launchMain();
                else document.getElementById('menuStage').classList.remove('hidden');
            }
        }
        function launchMain() {
            document.getElementById('mainPage').classList.remove('hidden');
            playTrack('mainMusic');
            moveIcons();
        }
        function moveIcons() {
            ['iconVerses', 'iconLetter'].forEach(id => {
                const el = document.getElementById(id);
                setInterval(() => {
                    el.style.top = Math.random() * 80 + 'vh';
                    el.style.left = Math.random() * 80 + 'vw';
                }, 3000);
            });
        }
        function openPoemFlow() { pIndex = 0; vVerses = true; document.getElementById('poemOverlay').classList.remove('hidden'); updatePoem(); }
        function updatePoem() { document.getElementById('poemContent').innerHTML = poems[pIndex].replace(/\n/g, "<br>"); }
        function nextPoem() { pIndex++; if(pIndex < poems.length) updatePoem(); else { document.getElementById('poemOverlay').classList.add('hidden'); unlockP(); } }
        function openLetter() { vLetter = true; document.getElementById('letterOverlay').classList.remove('hidden'); }
        function closeLetter() { document.getElementById('letterOverlay').classList.add('hidden'); unlockP(); }
        function unlockP() { if(vVerses && vLetter) document.getElementById('proposalTrigger').classList.remove('hidden'); }
        function startProposal() { document.getElementById('mainPage').classList.add('hidden'); document.getElementById('propStage1').classList.remove('hidden'); }
        function nextPropStage() { document.getElementById('propStage1').classList.add('hidden'); document.getElementById('propStage2').classList.remove('hidden'); }
        function finishProposal() { document.getElementById('propStage2').classList.add('hidden'); document.getElementById('finalStage').classList.remove('hidden'); }
        function khabardar() { alert("Khabardar ye option choose kiya toh ğŸ”ª"); }
        function playTrack(id) {
            ['quizMusic', 'memoriesMusic', 'mainMusic'].forEach(m => {
                let a = document.getElementById(m);
                if(m === id) a.play(); else a.pause();
            });
        }
    </script>
</body>
        </html>
